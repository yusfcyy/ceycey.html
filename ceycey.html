<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ceylin & Yusuf - Efsanevi Dostluk</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.21.4/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      -webkit-text-size-adjust: 100%;
    }
    .animate-bg {
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceff, #ffa5a5, #a29bfe);
      background-size: 400%;
      animation: bg 15s ease infinite;
    }
    @keyframes bg {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .animate-float {
      animation: float 4s ease-in-out infinite;
    }
    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    .animate-pulse-slow {
      animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    .glass {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    .profile-avatar {
      transition: all 0.3s ease;
    }
    .profile-avatar:hover {
      transform: scale(1.1) rotate(5deg);
    }
    .rainbow-text {
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceff, #ffa5a5, #a29bfe);
      background-size: 400%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: bg 8s ease infinite;
    }
    .friend-card {
      transition: all 0.3s ease;
    }
    .friend-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .emoji-picker {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 5px;
      max-height: 150px;
      overflow-y: auto;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      margin-top: 10px;
    }
    .emoji-option {
      font-size: 1.5rem;
      cursor: pointer;
      transition: transform 0.2s;
      text-align: center;
    }
    .emoji-option:hover {
      transform: scale(1.3);
    }
    .message-bubble {
      max-width: 85%;
      padding: 12px 16px;
      border-radius: 18px;
      margin-bottom: 8px;
      position: relative;
      word-wrap: break-word;
    }
    .message-bubble.own {
      background: #007AFF;
      color: white;
      margin-left: auto;
      border-bottom-right-radius: 4px;
    }
    .message-bubble.friend {
      background: #E5E5EA;
      color: black;
      margin-right: auto;
      border-bottom-left-radius: 4px;
    }
    .message-time {
      font-size: 0.7rem;
      opacity: 0.7;
      margin-top: 4px;
      text-align: right;
    }
    .profile-image {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .home-hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      overflow: hidden;
      position: relative;
    }
    .home-hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
    }
    .distance-map {
      position: relative;
      height: 300px;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      border-radius: 15px;
      overflow: hidden;
    }
    .map-point {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }
    .map-point::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: pulse 2s infinite;
    }
    .message-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .message-avatar:hover {
      transform: scale(1.2);
    }
    .profile-popup {
      position: absolute;
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      z-index: 1000;
      max-width: 200px;
      animation: fadeIn 0.3s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .clear-chat-btn {
      background: #ff4757;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
    }
    .clear-chat-btn:hover {
      background: #ff3742;
      transform: scale(1.05);
    }
    .message-actions {
      display: flex;
      gap: 5px;
      margin-top: 5px;
    }
    .delete-message-btn {
      background: rgba(255, 71, 87, 0.1);
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }
    .delete-message-btn:hover {
      background: rgba(255, 71, 87, 0.3);
    }
    .profile-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 5px;
    }
    .profile-badge img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      object-fit: cover;
    }
    .mobile-menu {
      display: none;
    }
    @media (max-width: 768px) {
      .mobile-menu {
        display: flex;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        padding: 10px;
        z-index: 100;
        justify-content: space-around;
        border-top: 1px solid rgba(0,0,0,0.1);
      }
      .mobile-menu-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 8px;
        border-radius: 10px;
        transition: all 0.3s;
        font-size: 12px;
        min-width: 60px;
      }
      .mobile-menu-btn.active {
        background: rgba(102, 126, 234, 0.2);
      }
      .mobile-menu-btn i {
        font-size: 20px;
        margin-bottom: 4px;
      }
      header .flex {
        flex-direction: column;
        gap: 10px;
        padding: 15px;
      }
      header .flex .flex {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }
      .desktop-tabs {
        display: none;
      }
      .stats-grid {
        grid-template-columns: 1fr !important;
      }
      .photo-grid {
        grid-template-columns: 1fr !important;
      }
      .memory-grid {
        grid-template-columns: 1fr !important;
      }
      .home-grid {
        grid-template-columns: 1fr !important;
      }
      .container {
        padding: 15px;
      }
      .glass {
        padding: 15px;
      }
      .message-bubble {
        max-width: 90%;
      }
      .profile-image {
        width: 60px;
        height: 60px;
      }
      h1 {
        font-size: 2rem;
      }
      h2 {
        font-size: 1.5rem;
      }
      h3 {
        font-size: 1.25rem;
      }
      .home-hero {
        padding: 20px;
      }
      .distance-map {
        height: 200px;
      }
      .profile-avatar-grid {
        grid-template-columns: repeat(4, 1fr) !important;
      }
      .avatar-option {
        font-size: 1.5rem;
        padding: 8px;
      }
    }
    @media (max-width: 480px) {
      .profile-avatar-grid {
        grid-template-columns: repeat(3, 1fr) !important;
      }
      .emoji-picker {
        grid-template-columns: repeat(5, 1fr);
      }
    }
    .surprise-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .surprise-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      position: relative;
    }
    .surprise-heart {
      font-size: 60px;
      color: #ff6b6b;
      animation: heartbeat 1.5s infinite;
    }
    @keyframes heartbeat {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .question-input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 2px solid #667eea;
      border-radius: 10px;
      font-size: 16px;
    }
    .correct-answer {
      border-color: #4ecdc4 !important;
      background-color: rgba(78, 205, 196, 0.1);
    }
    .wrong-answer {
      border-color: #ff6b6b !important;
      background-color: rgba(255, 107, 107, 0.1);
    }
    .memory-features {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .memory-feature {
      background: rgba(255,255,255,0.3);
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .stats-progress {
      height: 10px;
      background: rgba(255,255,255,0.3);
      border-radius: 5px;
      overflow: hidden;
      margin-top: 5px;
    }
    .stats-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
      border-radius: 5px;
      transition: width 1s ease;
    }
    .profile-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .profile-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }
    .profile-avatar-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin: 15px 0;
    }
    .avatar-option {
      font-size: 2rem;
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .avatar-option.selected {
      background: #667eea;
      color: white;
      transform: scale(1.1);
    }
    .avatar-option:hover {
      background: #f0f0f0;
      transform: scale(1.05);
    }
    .special-reasons {
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
    }
    .special-reasons textarea {
      width: 100%;
      min-height: 120px;
      padding: 15px;
      border-radius: 10px;
      border: 2px solid rgba(255,255,255,0.5);
      background: rgba(255,255,255,0.8);
      resize: vertical;
    }
    .stats-chart {
      height: 200px;
      display: flex;
      align-items: flex-end;
      justify-content: space-around;
      margin-top: 20px;
      padding: 10px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
    }
    .stats-bar {
      width: 30px;
      background: linear-gradient(to top, #667eea, #764ba2);
      border-radius: 5px 5px 0 0;
      position: relative;
    }
    .stats-bar-label {
      position: absolute;
      bottom: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      white-space: nowrap;
    }
    .stats-bar-value {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const users = [
      { 
        username: 'Ceycey', 
        password: '8686', 
        role: 'user', 
        avatar: 'ğŸ˜º',
        bio: 'Kedi sever, efsanevi dost! ğŸ¾',
        favoriteColor: '#ff6b6b',
        profileImage: null
      },
      { 
        username: 'Yusuf', 
        password: '4040', 
        role: 'admin', 
        avatar: 'ğŸ¦',
        bio: 'Aslan gibi, en iyi arkadaÅŸ! ğŸ¦',
        favoriteColor: '#4ecdc4',
        profileImage: null
      }
    ];

    const startDate = new Date('2025-04-29');
    const calculateDays = () => {
      const today = new Date();
      const diffTime = Math.abs(today - startDate);
      return Math.floor(diffTime / (1000 * 60 * 60 * 24)) + 1;
    };

    const backgroundMusic = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');
    backgroundMusic.loop = true;

    const launchConfetti = (type = 'default') => {
      try {
        const canvas = document.createElement('canvas');
        canvas.id = 'confetti-canvas-' + Date.now();
        canvas.style.position = 'fixed';
        canvas.style.top = '0';
        canvas.style.left = '0';
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.pointerEvents = 'none';
        canvas.style.zIndex = '9999';
        document.body.appendChild(canvas);

        const myConfetti = confetti.create(canvas, { 
          resize: true, 
          useWorker: true 
        });

        const options = {
          particleCount: 500,
          spread: 160,
          origin: { y: 0.3 },
          colors: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceff', '#feca57', '#ff4757'],
          zIndex: 9999,
          decay: 0.9,
          scalar: 1.2
        };
        
        if (type === 'heart') {
          options.shapes = ['heart'];
          options.colors = ['#ff6b6b', '#ff4757', '#ff9ff3'];
        } else if (type === 'star') {
          options.shapes = ['star'];
          options.colors = ['#feca57', '#ffd700', '#fff200'];
        } else if (type === 'celebration') {
          options.particleCount = 800;
          options.spread = 200;
        }

        myConfetti(options).then(() => {
          setTimeout(() => {
            if (canvas && canvas.parentNode) {
              canvas.parentNode.removeChild(canvas);
            }
          }, 3000);
        });
      } catch (e) {
        console.error('Konfeti hatasÄ±:', e);
      }
    };

    const LoginPage = ({ setIsLoggedIn, setCurrentUser, theme, toggleTheme }) => {
      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');
      const [error, setError] = useState('');

      const handleLogin = () => {
        try {
          const user = users.find(
            u => u.username.toLowerCase() === username.toLowerCase() && u.password === password
          );
          if (user) {
            const profile = JSON.parse(localStorage.getItem('userProfiles') || '[]').find(p => p.username === user.username) || user;
            setCurrentUser({...user, ...profile});
            setIsLoggedIn(true);
            setError('');
            setUsername('');
            setPassword('');
          } else {
            setError('Kanka, kullanÄ±cÄ± adÄ± ya da ÅŸifre yanlÄ±ÅŸ! ğŸ˜…');
          }
        } catch (e) {
          console.error('GiriÅŸ hatasÄ±:', e);
          setError('GiriÅŸ yaparken hata oluÅŸtu, konsolu kontrol et!');
        }
      };

      return (
        <div className={`min-h-screen flex items-center justify-center animate-bg transition-colors duration-500 ${theme === 'dark' ? 'bg-gray-900' : ''}`}>
          <div className="glass p-10 rounded-3xl shadow-2xl w-full max-w-lg transform transition-all hover:scale-105">
            <h1 className="text-5xl font-extrabold text-center rainbow-text mb-8 animate-pulse-slow">
              Ceylin & Yusuf'un Efsanevi DÃ¼nyasÄ±
            </h1>
            <div className="space-y-6">
              <div>
                <label className="block text-sm font-bold text-gray-200">KullanÄ±cÄ± AdÄ±</label>
                <input
                  type="text"
                  value={username}
                  onChange={(e) => setUsername(e.target.value)}
                  className="mt-2 p-4 w-full bg-gray-800/50 text-white border-2 border-indigo-400 rounded-lg focus:ring-4 focus:ring-pink-500 focus:border-pink-500 transition-all"
                  placeholder="Ceycey ya da Yusuf"
                />
              </div>
              <div>
                <label className="block text-sm font-bold text-gray-200">Åifre</label>
                <input
                  type="password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  className="mt-2 p-4 w-full bg-gray-800/50 text-white border-2 border-indigo-400 rounded-lg focus:ring-4 focus:ring-pink-500 focus:border-pink-500 transition-all"
                  placeholder="Åifreni gir, kanka!"
                />
              </div>
              {error && <p className="text-red-400 text-sm text-center font-semibold animate-pulse">{error}</p>}
              <button
                onClick={handleLogin}
                className="w-full bg-gradient-to-r from-pink-600 to-indigo-600 text-white py-4 rounded-lg hover:from-pink-700 hover:to-indigo-700 transition-all transform hover:scale-110"
              >
                GiriÅŸ Yap, Macera BaÅŸlasÄ±n! ğŸš€
              </button>
              <button
                onClick={toggleTheme}
                className="w-full bg-gray-700 text-white py-3 rounded-lg hover:bg-gray-800 transition-all"
              >
                {theme === 'light' ? 'Koyu Tema ğŸŒ™' : 'AÃ§Ä±k Tema â˜€ï¸'}
              </button>
            </div>
          </div>
        </div>
      );
    };

    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [currentUser, setCurrentUser] = useState(null);
      const [aboutUs, setAboutUs] = useState(() => {
        try {
          return localStorage.getItem('aboutUs') || 'Ceylin & Yusuf\'un efsanevi dostluÄŸu! ğŸŒŸ';
        } catch {
          return 'Ceylin & Yusuf\'un efsanevi dostluÄŸu! ğŸŒŸ';
        }
      });
      const [memories, setMemories] = useState(() => {
        try {
          return JSON.parse(localStorage.getItem('memories')) || [];
        } catch {
          return [];
        }
      });
      const [messages, setMessages] = useState(() => {
        try {
          return JSON.parse(localStorage.getItem('messages')) || [];
        } catch {
          return [];
        }
      });
      const [newMemory, setNewMemory] = useState('');
      const [newMessage, setNewMessage] = useState('');
      const [playMusic, setPlayMusic] = useState(false);
      const [theme, setTheme] = useState('light');
      const [confettiCount, setConfettiCount] = useState(() => {
        try {
          return parseInt(localStorage.getItem('confettiCount')) || 0;
        } catch {
          return 0;
        }
      });
      const [newPhoto, setNewPhoto] = useState(null);
      const [photoCaption, setPhotoCaption] = useState('');
      const [photos, setPhotos] = useState(() => {
        try {
          return JSON.parse(localStorage.getItem('photos')) || [];
        } catch {
          return [];
        }
      });
      const [showProfile, setShowProfile] = useState(false);
      const [userProfiles, setUserProfiles] = useState(() => {
        try {
          return JSON.parse(localStorage.getItem('userProfiles')) || users;
        } catch {
          return users;
        }
      });
      const [editingProfile, setEditingProfile] = useState(false);
      const [profileForm, setProfileForm] = useState({
        avatar: '',
        bio: '',
        favoriteColor: '#ff6b6b',
        profileImage: null
      });
      const [activeTab, setActiveTab] = useState('home');
      const [showEmojiPicker, setShowEmojiPicker] = useState(false);
      const [profilePopup, setProfilePopup] = useState(null);
      const [celebrating, setCelebrating] = useState(false);
      const [showSurprise, setShowSurprise] = useState(false);
      const [surpriseStep, setSurpriseStep] = useState(0);
      const [surpriseAnswers, setSurpriseAnswers] = useState(['', '', '']);
      const [surpriseCompleted, setSurpriseCompleted] = useState(false);
      const [memoryType, setMemoryType] = useState('normal');
      const [memoryMood, setMemoryMood] = useState('happy');
      const [specialReasons, setSpecialReasons] = useState(() => {
        try {
          return localStorage.getItem('specialReasons') || 'Sen benim iÃ§in Ã§ok Ã¶zelsin Ã§Ã¼nkÃ¼...';
        } catch {
          return 'Sen benim iÃ§in Ã§ok Ã¶zelsin Ã§Ã¼nkÃ¼...';
        }
      });
      const messagesEndRef = useRef(null);

      useEffect(() => {
        if (playMusic) {
          backgroundMusic.play().catch(e => console.log('MÃ¼zik Ã§alma hatasÄ±:', e));
        } else {
          backgroundMusic.pause();
        }
        
        return () => {
          backgroundMusic.pause();
        };
      }, [playMusic]);

      useEffect(() => {
        try {
          localStorage.setItem('aboutUs', aboutUs);
          localStorage.setItem('memories', JSON.stringify(memories));
          localStorage.setItem('messages', JSON.stringify(messages));
          localStorage.setItem('photos', JSON.stringify(photos));
          localStorage.setItem('confettiCount', confettiCount.toString());
          localStorage.setItem('userProfiles', JSON.stringify(userProfiles));
          localStorage.setItem('specialReasons', specialReasons);
        } catch (e) {
          console.error('localStorage hatasÄ±:', e);
        }
      }, [aboutUs, memories, messages, photos, confettiCount, userProfiles, specialReasons]);

      useEffect(() => {
        if (isLoggedIn) {
          launchConfetti('celebration');
          setConfettiCount(c => c + 1);
        }
      }, [isLoggedIn]);

      useEffect(() => {
        if (currentUser) {
          const userProfile = userProfiles.find(u => u.username === currentUser.username);
          if (userProfile) {
            setProfileForm({
              avatar: userProfile.avatar,
              bio: userProfile.bio,
              favoriteColor: userProfile.favoriteColor,
              profileImage: userProfile.profileImage
            });
          }
        }
      }, [currentUser, userProfiles]);

      useEffect(() => {
        messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
      }, [messages]);

      const handleLogout = () => {
        setIsLoggedIn(false);
        setCurrentUser(null);
        setPlayMusic(false);
        setShowProfile(false);
        backgroundMusic.pause();
      };

      const handleAboutUsChange = (e) => {
        if (currentUser?.role === 'admin') {
          setAboutUs(e.target.value);
        }
      };

      const handleSpecialReasonsChange = (e) => {
        if (currentUser?.role === 'admin') {
          setSpecialReasons(e.target.value);
        }
      };

      const handleAddMemory = () => {
        if (newMemory.trim()) {
          const moodEmojis = {
            happy: 'ğŸ˜Š',
            excited: 'ğŸ¤©',
            love: 'â¤ï¸',
            funny: 'ğŸ˜‚',
            nostalgic: 'ğŸ¥¹'
          };
          
          setMemories([
            ...memories,
            {
              id: Date.now(),
              text: newMemory,
              author: currentUser.username,
              authorAvatar: currentUser.avatar,
              date: new Date().toLocaleDateString(),
              time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
              likes: 0,
              type: memoryType,
              mood: memoryMood,
              moodEmoji: moodEmojis[memoryMood],
              confettiType: 'star'
            }
          ]);
          setNewMemory('');
          launchConfetti('star');
          setConfettiCount(c => c + 1);
        }
      };

      const handleDeleteMemory = (id) => {
        if (currentUser?.role === 'admin') {
          setMemories(memories.filter(m => m.id !== id));
        }
      };

      const handleLikeMemory = (id) => {
        setMemories(
          memories.map(m =>
            m.id === id ? { ...m, likes: m.likes + 1 } : m
          )
        );
        launchConfetti('heart');
        setConfettiCount(c => c + 1);
      };

      const handleSendMessage = () => {
        if (newMessage.trim()) {
          setMessages([
            ...messages,
            {
              id: Date.now(),
              text: newMessage,
              sender: currentUser.username,
              senderAvatar: currentUser.avatar,
              senderProfileImage: currentUser.profileImage,
              date: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
              timestamp: Date.now()
            }
          ]);
          setNewMessage('');
        }
      };

      const handleDeleteMessage = (id) => {
        const message = messages.find(m => m.id === id);
        if (currentUser?.role === 'admin' || (message && message.sender === currentUser.username)) {
          setMessages(messages.filter(m => m.id !== id));
        }
      };

      const handleClearChat = () => {
        if (currentUser?.role === 'admin') {
          setMessages([]);
        }
      };

      const handlePhotoUpload = (e) => {
        const file = e.target.files[0];
        if (file && currentUser?.role === 'admin') {
          const reader = new FileReader();
          reader.onload = (event) => {
            setNewPhoto(event.target.result);
          };
          reader.readAsDataURL(file);
        }
      };

      const handleAddPhoto = () => {
        if (newPhoto && photoCaption.trim() && currentUser?.role === 'admin') {
          setPhotos([
            ...photos,
            {
              id: Date.now(),
              src: newPhoto,
              caption: photoCaption,
              date: new Date().toLocaleDateString(),
              author: currentUser.username
            }
          ]);
          setNewPhoto(null);
          setPhotoCaption('');
          launchConfetti('star');
          setConfettiCount(c => c + 1);
        }
      };

      const handleDeletePhoto = (id) => {
        if (currentUser?.role === 'admin') {
          setPhotos(photos.filter(p => p.id !== id));
        }
      };

      const toggleMusic = () => {
        setPlayMusic(!playMusic);
      };

      const toggleTheme = () => {
        setTheme(theme === 'light' ? 'dark' : 'light');
      };

      const toggleProfile = () => {
        setShowProfile(!showProfile);
        setEditingProfile(false);
      };

      const handleProfileEdit = () => {
        setEditingProfile(true);
      };

      const handleProfileImageChange = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            setProfileForm({...profileForm, profileImage: event.target.result});
          };
          reader.readAsDataURL(file);
        }
      };

      const handleProfileSave = () => {
        if (currentUser) {
          const updatedProfiles = userProfiles.map(profile => 
            profile.username === currentUser.username 
              ? { ...profile, ...profileForm }
              : profile
          );
          setUserProfiles(updatedProfiles);
          setCurrentUser({...currentUser, ...profileForm});
          setEditingProfile(false);
          setShowProfile(false);
          launchConfetti('star');
        }
      };

      const handleProfileCancel = () => {
        const userProfile = userProfiles.find(u => u.username === currentUser.username);
        if (userProfile) {
          setProfileForm({
            avatar: userProfile.avatar,
            bio: userProfile.bio,
            favoriteColor: userProfile.favoriteColor,
            profileImage: userProfile.profileImage
          });
        }
        setEditingProfile(false);
      };

      const selectAvatar = (avatar) => {
        setProfileForm({...profileForm, avatar});
      };

      const showProfilePopup = (user, event) => {
        const rect = event.target.getBoundingClientRect();
        setProfilePopup({
          user,
          position: {
            top: rect.top - 180,
            left: rect.left
          }
        });
      };

      const hideProfilePopup = () => {
        setProfilePopup(null);
      };

      const celebrateFriendship = () => {
        setCelebrating(true);
        launchConfetti('celebration');
        setConfettiCount(c => c + 1);
        setTimeout(() => setCelebrating(false), 3000);
      };

      const startSurprise = () => {
        setShowSurprise(true);
        setSurpriseStep(0);
        setSurpriseAnswers(['', '', '']);
        setSurpriseCompleted(false);
      };

      const handleSurpriseAnswer = (index, value) => {
        const newAnswers = [...surpriseAnswers];
        newAnswers[index] = value;
        setSurpriseAnswers(newAnswers);
      };

      const checkSurpriseAnswer = (index) => {
        const answers = ['67', '04.29.2025', '86'];
        return surpriseAnswers[index].toLowerCase() === answers[index].toLowerCase();
      };

      const nextSurpriseStep = () => {
        if (checkSurpriseAnswer(surpriseStep)) {
          if (surpriseStep === 2) {
            setSurpriseCompleted(true);
            if (currentUser.username === 'Ceycey') {
              setMessages([
                ...messages,
                {
                  id: Date.now(),
                  text: 'Ceylin sÃ¼rpriz testini tamamladÄ± ve tÃ¼m sorularÄ± doÄŸru cevapladÄ±! ğŸ’–',
                  sender: 'Sistem',
                  senderAvatar: 'ğŸ‰',
                  date: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                  timestamp: Date.now()
                }
              ]);
            }
          } else {
            setSurpriseStep(surpriseStep + 1);
          }
        }
      };

      const closeSurprise = () => {
        setShowSurprise(false);
      };

      const emojis = ['ğŸ˜Š', 'ğŸ˜‚', 'â¤ï¸', 'ğŸ”¥', 'ğŸŒŸ', 'ğŸ‰', 'ğŸ¤©', 'ğŸ¥³', 'ğŸ˜', 'ğŸš€', 'ğŸ±', 'ğŸ¦', 'ğŸŒˆ', 'âœ¨', 'ğŸ’«', 'ğŸ’–', 'ğŸ’•', 'ğŸ‘', 'ğŸ‘', 'ğŸŠ'];

      const friendshipLevel = Math.floor(calculateDays() / 50 + memories.length / 5 + messages.length / 10 + confettiCount / 20);

      const calculateDistance = () => {
        return Math.floor(1150);
      };

      const availableAvatars = ['ğŸ˜º', 'ğŸ¦', 'ğŸ¶', 'ğŸ±', 'ğŸ¯', 'ğŸ°', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸµ', 'ğŸ§', 'ğŸ¦', 'ğŸ¤', 'ğŸ¦„', 'ğŸ™', 'ğŸ¬', 'ğŸ³', 'ğŸ¦', 'ğŸ¯', 'ğŸ®'];

      if (!isLoggedIn) {
        return <LoginPage setIsLoggedIn={setIsLoggedIn} setCurrentUser={setCurrentUser} theme={theme} toggleTheme={toggleTheme} />;
      }

      return (
        <div className={`min-h-screen transition-colors duration-500 ${theme === 'dark' ? 'bg-gray-900 text-white' : 'bg-gradient-to-b from-indigo-100 to-pink-100 text-gray-800'}`}>
          <header className="glass p-6 flex justify-between items-center shadow-lg">
            <h1 className="text-4xl font-extrabold rainbow-text">
              Ceylin & Yusuf ğŸŒŸ
            </h1>
            <div className="flex items-center space-x-6">
              <div className="flex items-center space-x-4">
                <button 
                  onClick={toggleProfile}
                  className="flex items-center space-x-3 bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 rounded-full hover:from-purple-600 hover:to-pink-600 transition transform hover:scale-105"
                >
                  {currentUser.profileImage ? (
                    <img src={currentUser.profileImage} alt="Profile" className="profile-image" />
                  ) : (
                    <span className="text-2xl profile-avatar">{currentUser.avatar}</span>
                  )}
                  <span className="text-lg font-semibold animate-float">{currentUser.username}</span>
                </button>
                {currentUser.username === 'Ceycey' && (
                  <button
                    onClick={startSurprise}
                    className="bg-red-500 text-white px-4 py-2 rounded-full hover:bg-red-600 transition transform hover:scale-105"
                  >
                    SÃ¼rpriz! ğŸ’
                  </button>
                )}
              </div>
              <button
                onClick={toggleMusic}
                className="bg-yellow-400 text-gray-800 px-5 py-2 rounded-full hover:bg-yellow-500 transition transform hover:scale-105"
              >
                {playMusic ? 'MÃ¼zik Kapat ğŸ¶' : 'MÃ¼zik AÃ§ ğŸ¶'}
              </button>
              <button
                onClick={toggleTheme}
                className="bg-gray-700 text-white px-5 py-2 rounded-full hover:bg-gray-800 transition transform hover:scale-105"
              >
                {theme === 'light' ? 'Koyu Tema ğŸŒ™' : 'AÃ§Ä±k Tema â˜€ï¸'}
              </button>
              <button
                onClick={handleLogout}
                className="bg-red-500 px-5 py-2 rounded-full hover:bg-red-600 transition transform hover:scale-105"
              >
                Ã‡Ä±kÄ±ÅŸ ğŸ˜¢
              </button>
            </div>
          </header>

          {showProfile && (
            <div className="profile-modal">
              <div className="profile-content">
                <div className="flex justify-between items-center mb-6">
                  <h2 className="text-3xl font-bold">ğŸ‘¤ Profil AyarlarÄ±</h2>
                  <button 
                    onClick={toggleProfile}
                    className="text-2xl text-gray-500 hover:text-gray-700"
                  >
                    âœ•
                  </button>
                </div>

                {!editingProfile ? (
                  <div className="space-y-6">
                    <div className="flex items-center space-x-6">
                      {currentUser.profileImage ? (
                        <img src={currentUser.profileImage} alt="Profile" className="profile-image w-32 h-32" />
                      ) : (
                        <span className="text-6xl profile-avatar">{currentUser.avatar}</span>
                      )}
                      <div>
                        <h3 className="text-2xl font-bold">{currentUser.username}</h3>
                        <p className="text-gray-600">{currentUser.bio}</p>
                        <p className="text-sm text-gray-500 mt-2">
                          {currentUser.role === 'admin' ? 'ğŸ‘‘ YÃ¶netici' : 'â­ Ãœye'}
                        </p>
                      </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4 text-center">
                      <div className="bg-gray-100 p-4 rounded-lg">
                        <div className="text-2xl font-bold">{memories.filter(m => m.author === currentUser.username).length}</div>
                        <div>AnÄ±larÄ±m</div>
                      </div>
                      <div className="bg-gray-100 p-4 rounded-lg">
                        <div className="text-2xl font-bold">{messages.filter(m => m.sender === currentUser.username).length}</div>
                        <div>MesajlarÄ±m</div>
                      </div>
                    </div>

                    <button
                      onClick={handleProfileEdit}
                      className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition transform hover:scale-105"
                    >
                      Profili DÃ¼zenle âœï¸
                    </button>
                  </div>
                ) : (
                  <div className="space-y-6">
                    <div className="text-center">
                      <h3 className="text-xl font-bold mb-4">Avatar SeÃ§</h3>
                      <div className="profile-avatar-grid">
                        {availableAvatars.map((avatar) => (
                          <div
                            key={avatar}
                            className={`avatar-option ${profileForm.avatar === avatar ? 'selected' : ''}`}
                            onClick={() => selectAvatar(avatar)}
                          >
                            {avatar}
                          </div>
                        ))}
                      </div>
                    </div>

                    <div>
                      <label className="block text-sm font-bold mb-2">Profil Resmi YÃ¼kle</label>
                      <input
                        type="file"
                        accept="image/*"
                        onChange={handleProfileImageChange}
                        className="w-full p-2 border rounded-lg"
                      />
                      {profileForm.profileImage && (
                        <img src={profileForm.profileImage} alt="Preview" className="mt-2 w-20 h-20 rounded-full object-cover" />
                      )}
                    </div>

                    <div>
                      <label className="block text-sm font-bold mb-2">Biyografi</label>
                      <textarea
                        value={profileForm.bio}
                        onChange={(e) => setProfileForm({...profileForm, bio: e.target.value})}
                        className="w-full h-20 p-3 border rounded-lg"
                        placeholder="Kendin hakkÄ±nda bir ÅŸeyler yaz..."
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-bold mb-2">Favori Rengin</label>
                      <input
                        type="color"
                        value={profileForm.favoriteColor}
                        onChange={(e) => setProfileForm({...profileForm, favoriteColor: e.target.value})}
                        className="w-full h-10"
                      />
                    </div>

                    <div className="flex space-x-4">
                      <button
                        onClick={handleProfileSave}
                        className="flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition"
                      >
                        Kaydet âœ…
                      </button>
                      <button
                        onClick={handleProfileCancel}
                        className="flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 transition"
                      >
                        Ä°ptal âŒ
                      </button>
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}

          {showSurprise && (
            <div className="surprise-modal">
              <div className="surprise-content">
                <button 
                  onClick={closeSurprise}
                  className="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl"
                >
                  âœ•
                </button>
                
                {!surpriseCompleted ? (
                  <>
                    <div className="surprise-heart">ğŸ’–</div>
                    <h2 className="text-2xl font-bold mb-4">Ã–zel SÃ¼rpriz Testi</h2>
                    <p className="mb-6">AÅŸaÄŸÄ±daki sorularÄ± doÄŸru cevaplayarak sÃ¼rprizi aÃ§!</p>
                    
                    <div className="space-y-6">
                      {surpriseStep === 0 && (
                        <div>
                          <p className="font-semibold mb-2">1. Soru: C?</p>
                          <input
                            type="text"
                            value={surpriseAnswers[0]}
                            onChange={(e) => handleSurpriseAnswer(0, e.target.value)}
                            className={`question-input ${surpriseAnswers[0] ? (checkSurpriseAnswer(0) ? 'correct-answer' : 'wrong-answer') : ''}`}
                            placeholder="CevabÄ± yazÄ±n..."
                          />
                        </div>
                      )}
                      
                      {surpriseStep === 1 && (
                        <div>
                          <p className="font-semibold mb-2">2. Soru: DostluÄŸumuzun baÅŸlangÄ±Ã§ tarihi? (AA.GG.YYYY)</p>
                          <input
                            type="text"
                            value={surpriseAnswers[1]}
                            onChange={(e) => handleSurpriseAnswer(1, e.target.value)}
                            className={`question-input ${surpriseAnswers[1] ? (checkSurpriseAnswer(1) ? 'correct-answer' : 'wrong-answer') : ''}`}
                            placeholder="Ã–rnek: 01.01.2023"
                          />
                        </div>
                      )}
                      
                      {surpriseStep === 2 && (
                        <div>
                          <p className="font-semibold mb-2">3. Soru: En sevdiÄŸin rakam?</p>
                          <input
                            type="text"
                            value={surpriseAnswers[2]}
                            onChange={(e) => handleSurpriseAnswer(2, e.target.value)}
                            className={`question-input ${surpriseAnswers[2] ? (checkSurpriseAnswer(2) ? 'correct-answer' : 'wrong-answer') : ''}`}
                            placeholder="Ä°ki basamaklÄ± bir sayÄ±"
                          />
                        </div>
                      )}
                    </div>
                    
                    <button
                      onClick={nextSurpriseStep}
                      disabled={!surpriseAnswers[surpriseStep]}
                      className={`mt-6 px-6 py-3 rounded-full font-bold transition-all ${
                        surpriseAnswers[surpriseStep] 
                          ? 'bg-green-500 hover:bg-green-600 text-white' 
                          : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                      }`}
                    >
                      {surpriseStep === 2 ? 'SÃ¼rprizi AÃ§! ğŸ' : 'Sonraki Soru â¡ï¸'}
                    </button>
                  </>
                ) : (
                  <>
                    <div className="surprise-heart">ğŸ‰</div>
                    <h2 className="text-2xl font-bold mb-4">Tebrikler! ğŸ¥³</h2>
                    <p className="text-lg mb-4">TÃ¼m sorularÄ± doÄŸru cevapladÄ±n!</p>
                    <p className="mb-6">Ä°ÅŸte Ã¶dÃ¼lÃ¼n: Yusuf'a Ã¶zel bir mesaj gÃ¶nderildi ve konfeti partisi baÅŸlÄ±yor! ğŸ’–</p>
                    
                    <button
                      onClick={() => {
                        launchConfetti('celebration');
                        setConfettiCount(c => c + 10);
                        closeSurprise();
                      }}
                      className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full hover:from-purple-600 hover:to-pink-600 transition transform hover:scale-105"
                    >
                      Konfeti Partisi BaÅŸlat! ğŸŠ
                    </button>
                  </>
                )}
              </div>
            </div>
          )}

          <div className="container mx-auto p-6">
            <div className="mobile-menu">
              {['home', 'memories', 'chat', 'photos', 'stats'].map((tab) => (
                <button
                  key={tab}
                  onClick={() => setActiveTab(tab)}
                  className={`mobile-menu-btn ${activeTab === tab ? 'active' : ''}`}
                >
                  <i className={`fas ${
                    tab === 'home' ? 'fa-home' :
                    tab === 'memories' ? 'fa-heart' :
                    tab === 'chat' ? 'fa-comments' :
                    tab === 'photos' ? 'fa-images' :
                    'fa-chart-bar'
                  }`}></i>
                  <span>
                    {tab === 'home' ? 'Anasayfa' :
                     tab === 'memories' ? 'AnÄ±lar' :
                     tab === 'chat' ? 'Sohbet' :
                     tab === 'photos' ? 'FotoÄŸraflar' : 'Ä°statistikler'}
                  </span>
                </button>
              ))}
            </div>

            <div className="desktop-tabs flex justify-center mb-8 space-x-4">
              {['home', 'memories', 'chat', 'photos', 'stats'].map((tab) => (
                <button
                  key={tab}
                  onClick={() => setActiveTab(tab)}
                  className={`px-6 py-3 rounded-full font-semibold transition-all ${
                    activeTab === tab 
                      ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg' 
                      : 'bg-white/50 hover:bg-white/70'
                  }`}
                >
                  {tab === 'home' ? 'ğŸ  Anasayfa' :
                   tab === 'memories' ? 'ğŸ’– AnÄ±lar' :
                   tab === 'chat' ? 'ğŸ’¬ Sohbet' :
                   tab === 'photos' ? 'ğŸ“¸ FotoÄŸraflar' : 'ğŸ“Š Ä°statistikler'}
                </button>
              ))}
            </div>

            <div className="content-area">
              {activeTab === 'home' && (
                <div className="home-grid grid grid-cols-1 lg:grid-cols-2 gap-8">
                  <div className="home-hero p-8 text-white">
                    <h2 className="text-4xl font-bold mb-4">HoÅŸ Geldin, {currentUser.username}! ğŸŒŸ</h2>
                    <p className="text-xl mb-6">Efsanevi dostluÄŸumuzun {calculateDays()}. gÃ¼nÃ¼nde birlikteyiz! ğŸ‰</p>
                    
                    <div className="flex space-x-4 mb-6">
                      <button 
                        onClick={celebrateFriendship}
                        className="bg-yellow-400 text-gray-800 px-6 py-3 rounded-full hover:bg-yellow-500 transition transform hover:scale-105"
                      >
                        ğŸŠ Kutlama Yap
                      </button>
                      <button 
                        onClick={() => launchConfetti('heart')}
                        className="bg-red-400 text-white px-6 py-3 rounded-full hover:bg-red-500 transition transform hover:scale-105"
                      >
                        ğŸ’– Kalp GÃ¶nder
                      </button>
                    </div>
                  </div>

                  <div className="distance-map p-6 text-white">
                    <h3 className="text-2xl font-bold mb-4">ğŸ“ Mesafeler Bizi AyÄ±ramaz!</h3>
                    <p className="text-lg">AramÄ±zdaki mesafe: {calculateDistance()} km</p>
                    <div className="relative h-full mt-4">
                      <div className="map-point" style={{top: '30%', left: '25%', background: '#ff6b6b'}}>
                        <div className="absolute inset-0 bg-red-400 rounded-full animate-ping"></div>
                      </div>
                      <div className="map-point" style={{top: '60%', left: '75%', background: '#4ecdc4'}}>
                        <div className="absolute inset-0 bg-teal-400 rounded-full animate-ping"></div>
                      </div>
                      <div className="absolute top-1/2 left-1/2 w-full h-1 bg-gradient-to-r from-red-400 to-teal-400 transform -translate-y-1/2"></div>
                    </div>
                  </div>

                  <div className="glass p-6">
                    <h3 className="text-2xl font-bold mb-4">ğŸ“ Bizim HakkÄ±mÄ±zda</h3>
                    {currentUser.role === 'admin' ? (
                      <textarea
                        value={aboutUs}
                        onChange={handleAboutUsChange}
                        className="w-full h-32 p-4 bg-white/20 rounded-lg border border-white/30 focus:ring-2 focus:ring-purple-500"
                        placeholder="Bizim hakkÄ±mÄ±zda bir ÅŸeyler yaz..."
                      />
                    ) : (
                      <p className="text-lg">{aboutUs}</p>
                    )}
                  </div>

                  {currentUser.username === 'Ceycey' && (
                    <div className="special-reasons glass p-6">
                      <h3 className="text-2xl font-bold mb-4">ğŸ’ Seninle her anÄ±m Ã¶zel Ã§Ã¼nkÃ¼ gerÃ§ek ben olabiliyorum(ilkdefa) ğŸ’–<br/>

KahkahalarÄ±n(randomlarin) hayatÄ±ma renk katÄ±yor ve en sÄ±kÄ±ntÄ±lÄ± anÄ±mda bile gÃ¼lÃ¼msetmeyi baÅŸarÄ±yorsun ğŸ˜Š<br/>

Sana her ÅŸeyi anlatabilirim Ã§Ã¼nkÃ¼ yargÄ±lamadan dinliyorsun(supheli,saka) ğŸ¤—<br/>

Sensiz geÃ§en gÃ¼nler eksik geÃ§iyor ve bunu her an hissediyorum ğŸ’«<br/>

En kÃ¼Ã§Ã¼k detaylarÄ± bile hatÄ±rlÄ±yorsun ve bu beni Ã§ok deÄŸerli hissettiriyor ğŸ¥°<br/>

Zor zamanlarÄ±mda hep yanÄ±mdasÄ±n ve bu gÃ¼veni baÅŸka hiÃ§kimsede bulamÄ±yorum ğŸ’ª<br/>

Birlikteyken zamanÄ±n nasÄ±l geÃ§tiÄŸini anlamÄ±yoruz ğŸ•°ï¸<br/>

Sana olan gÃ¼venim tam ve bu Ã§ok nadir bulunan bir ÅŸey ğŸ”<br/>

Hayallerimi destekliyorsun ve baÅŸaracaÄŸÄ±ma inanÄ±yorsun(Ailem disindaki tek kisisin bu konuda) ğŸš€<br/>
ğŸŒˆ
Her mesajina baktÄ±ÄŸÄ±mda yÃ¼zÃ¼mde bir gÃ¼lÃ¼mseme beliriyor ğŸ˜Š<br/>

Sadece sen beni gerÃ§ekten anlÄ±yorsun ğŸ¯<br/>

Sana olan sevgim her geÃ§en gÃ¼n artÄ±yor ğŸ“ˆ<br/>

Ã‡Ã¼nkÃ¼ sensiz bir hayat dÃ¼ÅŸÃ¼nemiyorum ve sen benim iÃ§in en Ã¶zelsin<br/></h3>
                      {currentUser.role === 'admin' ? (
                        <textarea
                          value={specialReasons}
                          onChange={handleSpecialReasonsChange}
                          className="w-full h-32 p-4 rounded-lg border-2 border-pink-300 focus:ring-2 focus:ring-pink-500"
                          placeholder="Ceylin iÃ§in neden Ã¶zel olduÄŸunu yaz..."
                        />
                      ) : (
                        <p className="text-lg bg-white/80 p-4 rounded-lg">{specialReasons}</p>
                      )}
                      <div className="mt-4 text-sm text-pink-700">
                        ğŸ’– Yusuf tarafÄ±ndan Ã¶zel olarak yazÄ±ldÄ±
                      </div>
                    </div>
                  )}

                  <div className="glass p-6">
                    <h3 className="text-2xl font-bold mb-4">ğŸ‘¥ Dostluk Profili</h3>
                    <div className="space-y-4">
                      <div className="flex items-center justify-between">
                        <span>Dostluk Seviyesi:</span>
                        <span className="font-bold text-xl">Level {friendshipLevel}</span>
                      </div>
                      <div className="stats-progress">
                        <div 
                          className="stats-progress-bar" 
                          style={{width: `${(friendshipLevel % 10) * 10}%`}}
                        ></div>
                      </div>
                      
                      <div className="grid grid-cols-2 gap-4 text-center">
                        <div className="bg-white/20 p-4 rounded-lg">
                          <div className="text-2xl">{memories.length}</div>
                          <div>AnÄ±</div>
                        </div>
                        <div className="bg-white/20 p-4 rounded-lg">
                          <div className="text-2xl">{messages.length}</div>
                          <div>Mesaj</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {activeTab === 'memories' && (
                <div className="space-y-6">
                  <div className="glass p-6">
                    <h2 className="text-3xl font-bold mb-4">ğŸ’– Yeni AnÄ± Ekle</h2>
                    <div className="space-y-4">
                      <textarea
                        value={newMemory}
                        onChange={(e) => setNewMemory(e.target.value)}
                        className="w-full h-24 p-4 bg-white/20 rounded-lg border border-white/30 focus:ring-2 focus:ring-purple-500"
                        placeholder="Buraya unutulmaz anÄ±nÄ± yaz..."
                      />
                      
                      <div className="flex flex-wrap gap-4">
                        <select 
                          value={memoryType}
                          onChange={(e) => setMemoryType(e.target.value)}
                          className="p-2 bg-white/20 rounded-lg border border-white/30"
                        >
                          <option value="normal">ğŸ“ Normal AnÄ±</option>
                          <option value="special">ğŸŒŸ Ã–zel AnÄ±</option>
                          <option value="funny">ğŸ˜‚ Komik AnÄ±</option>
                          <option value="emotional">ğŸ¥° Duygusal AnÄ±</option>
                        </select>
                        
                        <select 
                          value={memoryMood}
                          onChange={(e) => setMemoryMood(e.target.value)}
                          className="p-2 bg-white/20 rounded-lg border border-white/30"
                        >
                          <option value="happy">ğŸ˜Š Mutlu</option>
                          <option value="excited">ğŸ¤© HeyecanlÄ±</option>
                          <option value="love">â¤ï¸ AÅŸk</option>
                          <option value="funny">ğŸ˜‚ Komik</option>
                          <option value="nostalgic">ğŸ¥¹ Duygusal</option>
                        </select>
                      </div>
                      
                      <button
                        onClick={handleAddMemory}
                        disabled={!newMemory.trim()}
                        className="bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-full hover:from-green-600 hover:to-blue-600 disabled:opacity-50 transition transform hover:scale-105"
                      >
                        AnÄ±yÄ± Kaydet ğŸ‰
                      </button>
                    </div>
                  </div>

                  <div className="memory-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {memories.slice().reverse().map((memory) => (
                      <div key={memory.id} className="friend-card glass p-6 rounded-2xl">
                        <div className="flex items-center justify-between mb-3">
                          <div className="flex items-center space-x-2">
                            <span className="text-2xl">{memory.authorAvatar}</span>
                            <span className="font-semibold">{memory.author}</span>
                          </div>
                          <span className="text-sm opacity-70">{memory.date} {memory.time}</span>
                        </div>
                        
                        <p className="text-lg mb-4">{memory.text}</p>
                        
                        <div className="memory-features">
                          <span className="memory-feature">{memory.moodEmoji} {memory.mood}</span>
                          <span className="memory-feature">
                            {memory.type === 'special' ? 'ğŸŒŸ Ã–zel' :
                             memory.type === 'funny' ? 'ğŸ˜‚ Komik' :
                             memory.type === 'emotional' ? 'ğŸ¥° Duygusal' : 'ğŸ“ Normal'}
                          </span>
                        </div>
                        
                        <div className="flex justify-between items-center mt-4">
                          <button
                            onClick={() => handleLikeMemory(memory.id)}
                            className="flex items-center space-x-1 text-red-500 hover:text-red-600 transition"
                          >
                            <i className="fas fa-heart"></i>
                            <span>{memory.likes}</span>
                          </button>
                          
                          {currentUser.role === 'admin' && (
                            <button
                              onClick={() => handleDeleteMemory(memory.id)}
                              className="text-red-500 hover:text-red-700 transition"
                            >
                              <i className="fas fa-trash"></i>
                            </button>
                          )}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {activeTab === 'chat' && (
                <div className="glass p-6 rounded-2xl">
                  <div className="chat-header">
                    <h2 className="text-3xl font-bold">ğŸ’¬ CanlÄ± Sohbet</h2>
                    {currentUser.role === 'admin' && (
                      <button
                        onClick={handleClearChat}
                        className="clear-chat-btn"
                      >
                        Sohbeti Temizle ğŸ—‘ï¸
                      </button>
                    )}
                  </div>

                  <div className="chat-messages h-96 overflow-y-auto mb-6 space-y-4 p-4 bg-white/10 rounded-lg">
                    {messages.map((message) => (
                      <div key={message.id} className={`message-bubble ${message.sender === currentUser.username ? 'own' : 'friend'}`}>
                        <div className="flex items-start space-x-3">
                          <img 
                            src={message.senderProfileImage || `https://ui-avatars.com/api/?name=${message.sender}&background=ff6b6b&color=fff`}
                            alt={message.sender}
                            className="message-avatar"
                            onClick={(e) => showProfilePopup(
                              userProfiles.find(u => u.username === message.sender), 
                              e
                            )}
                          />
                          <div className="flex-1">
                            <div className="flex justify-between items-start">
                              <span className="font-semibold">{message.sender}</span>
                              <span className="text-xs opacity-70">{message.date}</span>
                            </div>
                            <p className="mt-1">{message.text}</p>
                            <div className="message-actions">
                              {(currentUser.role === 'admin' || message.sender === currentUser.username) && (
                                <button
                                  onClick={() => handleDeleteMessage(message.id)}
                                  className="delete-message-btn"
                                  title="MesajÄ± sil"
                                >
                                  <i className="fas fa-trash"></i>
                                </button>
                              )}
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                    <div ref={messagesEndRef} />
                  </div>

                  <div className="chat-input flex space-x-4">
                    <div className="flex-1 relative">
                      <input
                        type="text"
                        value={newMessage}
                        onChange={(e) => setNewMessage(e.target.value)}
                        onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}
                        className="w-full p-4 bg-white/20 rounded-lg border border-white/30 focus:ring-2 focus:ring-purple-500"
                        placeholder="MesajÄ±nÄ± yaz..."
                      />
                      <button
                        onClick={() => setShowEmojiPicker(!showEmojiPicker)}
                        className="absolute right-3 top-3 text-xl"
                      >
                        ğŸ˜Š
                      </button>
                      
                      {showEmojiPicker && (
                        <div className="emoji-picker">
                          {emojis.map((emoji, index) => (
                            <span
                              key={index}
                              className="emoji-option"
                              onClick={() => {
                                setNewMessage(newMessage + emoji);
                                setShowEmojiPicker(false);
                              }}
                            >
                              {emoji}
                            </span>
                          ))}
                        </div>
                      )}
                    </div>
                    <button
                      onClick={handleSendMessage}
                      disabled={!newMessage.trim()}
                      className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 transition transform hover:scale-105"
                    >
                      GÃ¶nder ğŸš€
                    </button>
                  </div>
                </div>
              )}

              {activeTab === 'photos' && currentUser.role === 'admin' && (
                <div className="space-y-6">
                  <div className="glass p-6">
                    <h2 className="text-3xl font-bold mb-4">ğŸ“¸ FotoÄŸraf Ekle</h2>
                    <div className="space-y-4">
                      <input
                        type="file"
                        accept="image/*"
                        onChange={handlePhotoUpload}
                        className="w-full p-2 bg-white/20 rounded-lg"
                      />
                      
                      {newPhoto && (
                        <div className="space-y-4">
                          <img src={newPhoto} alt="Preview" className="max-w-xs rounded-lg shadow-lg" />
                          <input
                            type="text"
                            value={photoCaption}
                            onChange={(e) => setPhotoCaption(e.target.value)}
                            className="w-full p-4 bg-white/20 rounded-lg border border-white/30"
                            placeholder="FotoÄŸraf aÃ§Ä±klamasÄ±..."
                          />
                          <button
                            onClick={handleAddPhoto}
                            className="bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-full hover:from-green-600 hover:to-blue-600 transition transform hover:scale-105"
                          >
                            FotoÄŸrafÄ± Ekle ğŸ“·
                          </button>
                        </div>
                      )}
                    </div>
                  </div>

                  <div className="photo-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {photos.slice().reverse().map((photo) => (
                      <div key={photo.id} className="friend-card glass p-4 rounded-2xl">
                        <img src={photo.src} alt={photo.caption} className="w-full h-48 object-cover rounded-lg mb-3" />
                        <p className="text-lg font-semibold mb-2">{photo.caption}</p>
                        <div className="flex justify-between items-center text-sm opacity-70">
                          <span>{photo.author}</span>
                          <span>{photo.date}</span>
                        </div>
                        <button
                          onClick={() => handleDeletePhoto(photo.id)}
                          className="mt-3 text-red-500 hover:text-red-700 transition"
                        >
                          <i className="fas fa-trash"></i> Sil
                        </button>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {activeTab === 'stats' && (
                <div className="space-y-6">
                  <div className="stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div className="glass p-6 rounded-2xl">
                      <h3 className="text-2xl font-bold mb-4">ğŸ“ˆ Dostluk Ä°statistikleri</h3>
                      <div className="space-y-4">
                        <div className="flex justify-between">
                          <span>Dostluk SÃ¼resi:</span>
                          <span className="font-bold">{calculateDays()} gÃ¼n</span>
                        </div>
                        <div className="flex justify-between">
                          <span>Toplam AnÄ±:</span>
                          <span className="font-bold">{memories.length}</span>
                        </div>
                        <div className="flex justify-between">
                          <span>Toplam Mesaj:</span>
                          <span className="font-bold">{messages.length}</span>
                        </div>
                        <div className="flex justify-between">
                          <span>Konfeti SayÄ±sÄ±:</span>
                          <span className="font-bold">{confettiCount}</span>
                        </div>
                      </div>
                    </div>

                    <div className="glass p-6 rounded-2xl">
                      <h3 className="text-2xl font-bold mb-4">ğŸ¯ Etkinlikler</h3>
                      <div className="space-y-3">
                        <div className="flex items-center justify-between p-3 bg-white/10 rounded-lg">
                          <span>Son AnÄ± Ekleme</span>
                          <span>{memories.length > 0 ? new Date(memories[memories.length-1].id).toLocaleDateString() : 'HenÃ¼z yok'}</span>
                        </div>
                        <div className="flex items-center justify-between p-3 bg-white/10 rounded-lg">
                          <span>Son Mesaj</span>
                          <span>{messages.length > 0 ? new Date(messages[messages.length-1].timestamp).toLocaleDateString() : 'HenÃ¼z yok'}</span>
                        </div>
                      </div>
                    </div>

                    <div className="glass p-6 rounded-2xl">
                      <h3 className="text-2xl font-bold mb-4">ğŸ† BaÅŸarÄ±lar</h3>
                      <div className="space-y-3">
                        <div className={`p-3 rounded-lg ${memories.length >= 10 ? 'bg-yellow-400/20' : 'bg-white/10'}`}>
                          <span>10+ AnÄ± ğŸ“</span>
                          {memories.length >= 10 && <span className="float-right">âœ…</span>}
                        </div>
                        <div className={`p-3 rounded-lg ${messages.length >= 50 ? 'bg-yellow-400/20' : 'bg-white/10'}`}>
                          <span>50+ Mesaj ğŸ’¬</span>
                          {messages.length >= 50 && <span className="float-right">âœ…</span>}
                        </div>
                        <div className={`p-3 rounded-lg ${calculateDays() >= 100 ? 'bg-yellow-400/20' : 'bg-white/10'}`}>
                          <span>100+ GÃ¼n ğŸ‰</span>
                          {calculateDays() >= 100 && <span className="float-right">âœ…</span>}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="glass p-6 rounded-2xl">
                    <h3 className="text-2xl font-bold mb-4">ğŸ“Š GeliÅŸmiÅŸ Ä°statistikler</h3>
                    <div className="stats-chart">
                      <div className="stats-bar" style={{height: `${Math.min(calculateDays() / 10, 100)}%`}}>
                        <div className="stats-bar-value">{calculateDays()}</div>
                        <div className="stats-bar-label">GÃ¼n</div>
                      </div>
                      <div className="stats-bar" style={{height: `${Math.min(memories.length * 5, 100)}%`}}>
                        <div className="stats-bar-value">{memories.length}</div>
                        <div className="stats-bar-label">AnÄ±</div>
                      </div>
                      <div className="stats-bar" style={{height: `${Math.min(messages.length * 2, 100)}%`}}>
                        <div className="stats-bar-value">{messages.length}</div>
                        <div className="stats-bar-label">Mesaj</div>
                      </div>
                      <div className="stats-bar" style={{height: `${Math.min(photos.length * 10, 100)}%`}}>
                        <div className="stats-bar-value">{photos.length}</div>
                        <div className="stats-bar-label">FotoÄŸraf</div>
                      </div>
                      <div className="stats-bar" style={{height: `${Math.min(confettiCount / 5, 100)}%`}}>
                        <div className="stats-bar-value">{confettiCount}</div>
                        <div className="stats-bar-label">Konfeti</div>
                      </div>
                    </div>
                    
                    <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                      <div className="bg-white/20 p-3 rounded-lg">
                        <div className="text-xl font-bold text-purple-600">{calculateDays()}</div>
                        <div className="text-sm">GÃ¼n</div>
                      </div>
                      <div className="bg-white/20 p-3 rounded-lg">
                        <div className="text-xl font-bold text-green-600">{memories.length}</div>
                        <div className="text-sm">AnÄ±</div>
                      </div>
                      <div className="bg-white/20 p-3 rounded-lg">
                        <div className="text-xlfont-bold text-pink-600">{photos.length}</div>
                        <div className="text-sm">FotoÄŸraf</div>
                      </div>
                      <div className="bg-white/20 p-3 rounded-lg">
                        <div className="text-xl font-bold text-yellow-600">{confettiCount}</div>
                        <div className="text-sm">Konfeti</div>
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </div>

            {profilePopup && (
              <div 
                className="profile-popup"
                style={{
                  top: profilePopup.position.top,
                  left: profilePopup.position.left
                }}
                onMouseLeave={hideProfilePopup}
              >
                <div className="flex items-center space-x-4 mb-3">
                  {profilePopup.user.profileImage ? (
                    <img 
                      src={profilePopup.user.profileImage} 
                      alt={profilePopup.user.username} 
                      className="w-16 h-16 rounded-full object-cover"
                    />
                  ) : (
                    <span className="text-4xl">{profilePopup.user.avatar}</span>
                  )}
                  <div>
                    <h3 className="text-lg font-bold">{profilePopup.user.username}</h3>
                    <p className="text-sm text-gray-600">{profilePopup.user.bio}</p>
                  </div>
                </div>
                <div className="profile-badge">
                  <i className="fas fa-crown text-yellow-500"></i>
                  <span>{profilePopup.user.role === 'admin' ? 'YÃ¶netici' : 'Ãœye'}</span>
                </div>
                <div className="profile-badge">
                  <i className="fas fa-heart text-red-500"></i>
                  <span>{memories.filter(m => m.author === profilePopup.user.username).length} AnÄ±</span>
                </div>
                <div className="profile-badge">
                  <i className="fas fa-comment text-blue-500"></i>
                  <span>{messages.filter(m => m.sender === profilePopup.user.username).length} Mesaj</span>
                </div>
              </div>
            )}
          </div>

          {celebrating && (
            <div className="fixed inset-0 flex items-center justify-center bg-black/50 z-[1000]">
              <div className="text-center text-white animate-pulse">
                <h2 className="text-4xl font-bold mb-4">DostluÄŸumuzu Kutluyoruz! ğŸ‰</h2>
                <p className="text-xl">Ceylin & Yusuf forever! ğŸ’–</p>
              </div>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
